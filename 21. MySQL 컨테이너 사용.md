# Docker에서 MySQL 서비스하기.
</br>

> MySQL 이미지에 대한 다양한 설명은 [여기](https://hub.docker.com/_/mysql)를 참고한다.

</br></br>

## 이미지 다운로드
<pre>$ docker pull mysql:5.7.31</pre>

</br></br>

## docker로 컨테이너 실행
</br>

### 호스트 운영체제에 데이터베이스 파일 저장폴더 지정
> 컨테이너는 삭제되면 그 안에 있는 모든 데이터가 없어진다. 
> 따라서 컨테이너가 삭제될 때 데이터가 다 지워지는 것을 방지하기 위해 호스트 운영체제의 디렉토리를 컨테이너의 특정 디렉토리로 연동해 
> 컨테이너가 삭제되더라도 데이터가 삭제되는것을 방지할 필요가 있다.
<pre> -v /home/[my]/dbmsfile:/var/lib/mysql</pre>
</br>

### 한글 사용 설정
<pre> --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci</pre>
</br>

### 전체 실행 명령
<pre>$ docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=free4567 \
    -v /home/freeman/document/dbms/mysql5.7.31:/var/lib/mysql --name mysql57 \
    mysql:5.7.31 --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci</pre>

</br></br>

## docker-compose로 컨테이너 실행
> docker 명령어가 너무 길다. docker-compose로 좀 편하게 실행하자.</br>
> docker-compose에 대한 자세한 설명은 아래를 참고하면 된다.
> - [docker-compose 설치](https://github.com/freemancho1/docker/blob/master/06.%201.Docker%20compose%20%EC%84%A4%EC%B9%98.md)
> - [docker-compose.yml 사용법](https://github.com/freemancho1/docker/blob/master/06.%203.docker-compose.yml%20%EC%82%AC%EC%9A%A9%EB%B2%95.md)
> - [docker-compose 실행](https://github.com/freemancho1/docker/blob/master/06.%202.docker-compose%20%EC%8B%A4%ED%96%89.md)
</br>

### docker-compose.yml 생성
<pre>$ vi docker-compose.yml
version: "3.8"
services:
    mydb:
        image: mysql:5.7.31
        container_name: mysql57
        ports:
            - "3306:3306"
        environment:
            MYSQL_ROOT_PASSWORD: "free4567"
        command:
            - --character-set-server=utf8mb4
            - --collation-server=utf8mb4_unicode_ci
        volumes:
            - /home/freeman/document/dbms/mysql5.7.31:/var/lib/mysql</pre>
</br>



